//************************************************************************************************************
// FILE: pot.c
//
// DESCRIPTION
// See comments in pot.h.
//
// AUTHOR
// Kevin R. Burger (burgerk@asu.edu)
// Computer Science & Engineering
// Arizona State University, Tempe AZ 85287-8809
// Web: http://www.devlang.com
//************************************************************************************************************
#include "adc.h"
#include "pot.h"

//======================================================================================================================
// Private Global Variable Defintions
//======================================================================================================================

static uint16_t g_digval;
static uint16_t g_prev_digval;

//======================================================================================================================
// Public Function Declarations
//======================================================================================================================

//----------------------------------------------------------------------------------------------------------------------
// FUNCTION: pot_get_curr_state()
//---------------------------------------------------------------------------------------------------------------------
uint16_t pot_get_curr_state()
{
    g_prev_digval = g_digval;
    g_digval = adc_convert();
    return g_digval;
}

//----------------------------------------------------------------------------------------------------------------------
// FUNCTION: pot_get_prev_state()
//---------------------------------------------------------------------------------------------------------------------
uint16_t pot_get_prev_state()
{
    return g_prev_digval;
}

//----------------------------------------------------------------------------------------------------------------------
// FUNCTION: pot_init()
//---------------------------------------------------------------------------------------------------------------------
void pot_init()
{
    g_digval = 0;
    g_prev_digval = 4095;
}
